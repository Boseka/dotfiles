alias rm="rm -iv"
alias mv="mv -iv"
alias cp="cp -iv"
set -o noclobber    # File redirection > does not overwrite existing file.

alias ls='ls --color=auto'
alias ll="ls -alrtF --color"
alias la="ls -A"
alias l="ls -CF"
alias dir='ls --color=auto --format=vertical'
alias vdir='ls --color=auto --format=long'
alias m='less -N'
alias less='less -N'
alias ..='cd ..'
alias ...='cd ..;cd ..'
alias ~='cd ~'
alias md='mkdir'
alias cl='clear'
alias cls='clear'
alias du='du -ch --max-depth=1'
alias treeacl='tree -A -C -L 2'

alias g='git'
alias ga='git add'
alias gap='git add -p'
alias gbr='git branch'
alias gcl='git clone'
alias gC='git checkout'
alias gc='git commit'
alias gd='git diff'
alias gdc='git diff --cached'
alias glgraph='git log --graph --pretty=format:"%Cblue%h %d%Creset - %s - %Cred%an%Creset - %Cgreen%ar"'
alias glgraphlong='git log --graph --pretty=format:"%Cblue%h %d%Creset - %s - %Cred%an (%ae)%Creset - %Cgreen%cD"'
alias gl='git log'
alias gp='git pull origin master'
alias gP='git push origin master'
alias grs='git reset'
alias grsh='git reset HEAD'
alias gs='git status'
alias gstash='git stash'

# Mac OS specific aliases
if [ "$(uname -s)" = "Darwin" ]; then
  alias ls='gls --color=auto'
  alias ll="gls -alrtF --color"
  alias la="gls -A"
  alias l="gls -CF"
  alias dir='gls --color=auto --format=vertical'
  alias vdir='gls --color=auto --format=long'
  alias du='gdu'
  alias subl='/Applications/Sublime\ Text.app/Contents/MacOS/Sublime\ Text --new-window --add .'
fi

alias grep='grep --color=auto'

command -v nvim 2>&1 > /dev/null && alias vim="nvim"
alias pythonserver='python2 -m SimpleHTTPServer'

set_env() {
  if [[ $# -eq 0 ]]; then
    echo 'Set persistent environment variables across shell instances in a tmux session.'
    echo "Usage: $0 NAME VALUE"
    echo "Example: $0 BSSID 01:23:34:56:78:9A"
  else
    TMUX_SESSION=$(tmux display-message -p '#S')
    FILE="$HOME/.shexports.$TMUX_SESSION"
    [[ ! -e "$FILE" ]] && touch "$FILE"
    echo "export $1=\"$2\"" >> "$FILE"
    get_env
  fi
}

get_env() {
  if [[ "$1" = '-h' || "$1" = '--help' ]]; then
    echo 'Re-source persistent environment variables'
    echo "Usage: $0" else TMUX_SESSION=$(tmux display-message -p '#S')
    FILE="$HOME/.shexports.$TMUX_SESSION"
    DEFAULT_FILE="$HOME/.shexports.default"
    [[ -e "$DEFAULT_FILE" ]] && source "$DEFAULT_FILE"
    [[ -e "$FILE" ]] && source "$FILE"
  fi
}

show_env() {
  if [[ "$1" = '-h' || "$1" = '--help' ]]; then
    echo 'Show tmux session persistent environment variables'
    echo "Usage: $0"
  else
    TMUX_SESSION=$(tmux display-message -p '#S')
    FILE="$HOME/.shexports.$TMUX_SESSION"
    less "$FILE"
  fi
}

get_env

[[ -e  "$HOME/.shaliases.local" ]] && source "$HOME/.shaliases.local"

source $HOME/.shaliases.*
